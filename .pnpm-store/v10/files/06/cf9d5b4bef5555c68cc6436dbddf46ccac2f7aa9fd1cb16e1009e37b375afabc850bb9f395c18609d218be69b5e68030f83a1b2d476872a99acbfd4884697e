{"version":3,"sources":["../src/hooks/index.ts","../src/hooks/useOas.ts","../src/hooks/useOperation.ts","../src/hooks/useOperationManager.ts","../src/hooks/useOperations.ts"],"sourcesContent":["export { useOas } from './useOas.ts'\nexport { useOperation } from './useOperation.ts'\nexport { useOperationManager } from './useOperationManager.ts'\nexport { useOperations } from './useOperations.ts'\nexport { useSchema } from './useSchema.ts'\n","import { useContext } from '@kubb/react'\n\nimport { Oas } from '../components/Oas.tsx'\n\nimport type { Oas as OasType } from '@kubb/oas'\n\nexport function useOas(): OasType {\n  const { oas } = useContext(Oas.Context)\n\n  if (!oas) {\n    throw new Error('Oas is not defined')\n  }\n\n  return oas\n}\n","import { useContext } from '@kubb/react'\n\nimport { Operation } from '../components/Operation.tsx'\n\nimport type { Operation as OperationType } from '@kubb/oas'\n\n/**\n * `useOperation` will return the current `Operation`\n */\nexport function useOperation(): OperationType {\n  const { operation } = useContext(Operation.Context)\n\n  if (!operation) {\n    throw new Error('Operation is not defined')\n  }\n\n  return operation\n}\n","import { useApp, useContext } from '@kubb/react'\n\nimport { Oas } from '../components/Oas.tsx'\n\nimport type { FileMetaBase, Plugin, ResolveNameParams } from '@kubb/core'\nimport type * as KubbFile from '@kubb/fs/types'\nimport type { Operation, Operation as OperationType } from '@kubb/oas'\nimport type { OperationSchemas } from '../types.ts'\n\ntype FileMeta = FileMetaBase & {\n  pluginKey: Plugin['key']\n  name: string\n  tag?: string\n}\n\ntype SchemaNames = {\n  request: string | undefined\n  parameters: {\n    path: string | undefined\n    query: string | undefined\n    header: string | undefined\n  }\n  responses: { default?: string } & Record<number | string, string>\n  errors: Record<number | string, string>\n}\n\ntype UseOperationManagerResult = {\n  getName: (operation: OperationType, params: { pluginKey?: Plugin['key']; type: ResolveNameParams['type'] }) => string\n  getFile: (operation: OperationType, params?: { pluginKey?: Plugin['key']; extName?: KubbFile.Extname }) => KubbFile.File<FileMeta>\n  groupSchemasByName: (operation: OperationType, params: { pluginKey?: Plugin['key']; type: ResolveNameParams['type'] }) => SchemaNames\n  getSchemas: (\n    operation: Operation,\n    params?: { pluginKey?: Plugin['key']; type?: ResolveNameParams['type'] },\n    forStatusCode?: string | number,\n  ) => OperationSchemas\n}\n\n/**\n * `useOperationManager` will return some helper functions that can be used to get the operation file, get the operation name.\n */\nexport function useOperationManager(): UseOperationManagerResult {\n  const { plugin, pluginManager } = useApp()\n  const { generator } = useContext(Oas.Context)\n\n  if (!generator) {\n    throw new Error(`'generator' is not defined`)\n  }\n\n  const getName: UseOperationManagerResult['getName'] = (operation, { pluginKey = plugin.key, type }) => {\n    return pluginManager.resolveName({\n      name: operation.getOperationId(),\n      pluginKey,\n      type,\n    })\n  }\n\n  const getFile: UseOperationManagerResult['getFile'] = (operation, { pluginKey = plugin.key, extName = '.ts' } = {}) => {\n    // needed for the `output.group`\n    const tag = operation.getTags().at(0)?.name\n    const name = getName(operation, { type: 'file', pluginKey })\n\n    const file = pluginManager.getFile({\n      name,\n      extName,\n      pluginKey,\n      options: { type: 'file', pluginKey, tag },\n    })\n\n    return {\n      ...file,\n      meta: {\n        ...file.meta,\n        name,\n        pluginKey,\n        tag,\n      },\n    }\n  }\n\n  const groupSchemasByName: UseOperationManagerResult['groupSchemasByName'] = (operation, { pluginKey = plugin.key, type }) => {\n    const schemas = generator.getSchemas(operation)\n\n    const errors = (schemas.errors || []).reduce(\n      (prev, acc) => {\n        if (!acc.statusCode) {\n          return prev\n        }\n\n        prev[acc.statusCode] = pluginManager.resolveName({\n          name: acc.name,\n          pluginKey,\n          type,\n        })\n\n        return prev\n      },\n      {} as Record<number, string>,\n    )\n\n    return {\n      request: schemas.request?.name\n        ? pluginManager.resolveName({\n            name: schemas.request.name,\n            pluginKey,\n            type,\n          })\n        : undefined,\n      parameters: {\n        path: schemas.pathParams?.name\n          ? pluginManager.resolveName({\n              name: schemas.pathParams.name,\n              pluginKey,\n              type,\n            })\n          : undefined,\n        query: schemas.queryParams?.name\n          ? pluginManager.resolveName({\n              name: schemas.queryParams.name,\n              pluginKey,\n              type,\n            })\n          : undefined,\n        header: schemas.headerParams?.name\n          ? pluginManager.resolveName({\n              name: schemas.headerParams.name,\n              pluginKey,\n              type,\n            })\n          : undefined,\n      },\n      responses: {\n        [schemas.response.statusCode || 'default']: pluginManager.resolveName({\n          name: schemas.response.name,\n          pluginKey,\n          type,\n        }),\n        ['default']: pluginManager.resolveName({\n          name: schemas.response.name,\n          pluginKey,\n          type,\n        }),\n        ...errors,\n      },\n      errors,\n    }\n  }\n\n  return {\n    getName,\n    getFile,\n    getSchemas: (operation, params, forStatusCode) =>\n      generator.getSchemas(operation, {\n        forStatusCode,\n        resolveName: (name) =>\n          pluginManager.resolveName({\n            name,\n            pluginKey: params?.pluginKey,\n            type: params?.type,\n          }),\n      }),\n    groupSchemasByName,\n  }\n}\n","import { useContext } from '@kubb/react'\n\nimport { Oas } from '../components/Oas.tsx'\n\nimport type { HttpMethod, Operation } from '@kubb/oas'\n\ntype UseOperationsProps = {\n  /**\n   * Filter based on path\n   * Weight: 2\n   */\n  path?: string\n  /**\n   * Filter based on method\n   * Weight: 1\n   */\n  method?: HttpMethod\n}\n\n/**\n * `useOperations` will return all the Operations\n */\nexport function useOperations({ method, path }: UseOperationsProps = {}): Operation[] {\n  const { operations } = useContext(Oas.Context)\n\n  if (!operations) {\n    throw new Error('Operations is not defined')\n  }\n  let items = operations\n\n  if (path) {\n    items = items.filter((item) => item.path === path)\n  }\n\n  if (method) {\n    items = items.filter((item) => item.method === method)\n  }\n\n  return items\n}\n"],"mappings":"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","names":["useContext","useContext","useContext","useContext","useContext","useContext"]}