{"version":3,"sources":["../src/client/index.ts","../src/client/createRoot.ts"],"sourcesContent":["import { createRoot } from './createRoot.ts'\n\nexport { createRoot } from './createRoot.ts'\nexport type * from './types.ts'\n\nexport default createRoot\n","import { ReactTemplate } from '../shared/ReactTemplate.tsx'\nimport { createNode } from '../shared/dom.ts'\n\nimport type { Logger } from '@kubb/core/logger'\nimport type { RootContextProps } from '../components/Root.tsx'\nimport type { DOMElement } from '../types.ts'\nimport type { RootType } from './types.ts'\n\nconst instances = new Map<string, ReactTemplate>()\n\ntype Props = {\n  container?: DOMElement\n  logger?: Logger\n}\n\nexport function createRoot<Context extends RootContextProps = RootContextProps>({ container, logger }: Props = {}): RootType<Context> {\n  if (!container) {\n    container = createNode('kubb-root')\n  }\n\n  const instance = new ReactTemplate<Context>(container, { logger })\n  instances.set(instance.id, instance)\n\n  return {\n    render(children, context?: Context) {\n      return instance.render(children, context)\n    },\n    unmount() {\n      instance.unmount()\n      instances.delete(instance.id)\n    },\n    get output() {\n      return instance.output\n    },\n    get files() {\n      return instance.files\n    },\n    getFile(id: string) {\n      return instance.files.find((file) => file.id === id)\n    },\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;;;ACAA;AAQA,IAAM,YAAY,oBAAI,IAA2B;AAO1C,SAAS,WAAgE,EAAE,WAAW,OAAO,IAAW,CAAC,GAAsB;AACpI,MAAI,CAAC,WAAW;AACd,gBAAY,WAAW,WAAW;AAAA,EACpC;AAEA,QAAM,WAAW,IAAI,cAAuB,WAAW,EAAE,OAAO,CAAC;AACjE,YAAU,IAAI,SAAS,IAAI,QAAQ;AAEnC,SAAO;AAAA,IACL,OAAO,UAAU,SAAmB;AAClC,aAAO,SAAS,OAAO,UAAU,OAAO;AAAA,IAC1C;AAAA,IACA,UAAU;AACR,eAAS,QAAQ;AACjB,gBAAU,OAAO,SAAS,EAAE;AAAA,IAC9B;AAAA,IACA,IAAI,SAAS;AACX,aAAO,SAAS;AAAA,IAClB;AAAA,IACA,IAAI,QAAQ;AACV,aAAO,SAAS;AAAA,IAClB;AAAA,IACA,QAAQ,IAAY;AAClB,aAAO,SAAS,MAAM,KAAK,CAAC,SAAS,KAAK,OAAO,EAAE;AAAA,IACrD;AAAA,EACF;AACF;;;ADpCA,IAAO,iBAAQ;","names":[]}