{"version":3,"sources":["../src/index.ts","../src/plugin.ts","../src/OperationGenerator.ts"],"sourcesContent":["import { pluginOas } from './plugin.ts'\n\nexport type {\n  GetOperationGeneratorOptions,\n  OperationMethodResult,\n} from './OperationGenerator.ts'\nexport { OperationGenerator } from './OperationGenerator.ts'\nexport { pluginOas, pluginOasName } from './plugin.ts'\nexport type {\n  GetSchemaGeneratorOptions,\n  SchemaGeneratorBuildOptions,\n  SchemaGeneratorOptions,\n} from './SchemaGenerator.ts'\nexport type { SchemaMethodResult } from './SchemaGenerator.ts'\nexport { SchemaGenerator } from './SchemaGenerator.ts'\nexport type {\n  Schema,\n  SchemaKeyword,\n  SchemaKeywordBase,\n  SchemaKeywordMapper,\n  SchemaMapper,\n} from './SchemaMapper.ts'\nexport { isKeyword, schemaKeywords } from './SchemaMapper.ts'\nexport type * from './types.ts'\n\n/**\n * @deprecated Use `import { pluginOas } from '@kubb/plugin-oas'` instead\n */\nconst definePluginDefault = pluginOas\n\nexport default definePluginDefault\n","import path from 'node:path'\n\nimport { createPlugin } from '@kubb/core'\nimport { camelCase } from '@kubb/core/transformers'\n\nimport { getSchemas } from './utils/getSchemas.ts'\n\nimport type { Config } from '@kubb/core'\nimport type { Logger } from '@kubb/core/logger'\nimport type { Oas, OasTypes } from '@kubb/oas'\nimport type { PluginOas } from './types.ts'\nimport { parseFromConfig } from './utils/parseFromConfig.ts'\n\nexport const pluginOasName = 'plugin-oas' satisfies PluginOas['name']\n\nexport const pluginOas = createPlugin<PluginOas>((options) => {\n  const { output = { path: 'schemas', export: false }, validate = true, serverIndex = 0, contentType, oasClass } = options\n\n  const getOas = async ({ config, logger }: { config: Config; logger: Logger }): Promise<Oas> => {\n    try {\n      // needs to be in a different variable or the catch here will not work(return of a promise instead)\n      const oas = await parseFromConfig(config, oasClass)\n\n      if (validate) {\n        await oas.valdiate()\n      }\n\n      return oas\n    } catch (e) {\n      const error = e as Error\n\n      logger.emit('warning', error?.message)\n      return parseFromConfig(config, oasClass)\n    }\n  }\n\n  return {\n    name: pluginOasName,\n    options,\n\n    api() {\n      const { config, logger } = this\n\n      return {\n        getOas() {\n          return getOas({ config, logger })\n        },\n        async getSchemas({ includes } = {}) {\n          const oas = await this.getOas()\n          return getSchemas({ oas, contentType, includes })\n        },\n        async getBaseURL() {\n          const oasInstance = await this.getOas()\n          const baseURL = oasInstance.api.servers?.at(serverIndex)?.url\n          return baseURL\n        },\n        contentType,\n      }\n    },\n    resolvePath(baseName) {\n      if (output === false) {\n        return undefined\n      }\n\n      const root = path.resolve(this.config.root, this.config.output.path)\n\n      return path.resolve(root, output.path, baseName)\n    },\n    resolveName(name, type) {\n      return camelCase(name, { isFile: type === 'file' })\n    },\n    async writeFile(path, source) {\n      if (!path.endsWith('.json') || !source) {\n        return\n      }\n\n      return this.fileManager.write(path, source, { sanity: false })\n    },\n    async buildStart() {\n      if (!output) {\n        return\n      }\n\n      const oas = await getOas({\n        config: this.config,\n        logger: this.logger,\n      })\n      await oas.dereference()\n      const schemas = getSchemas({ oas, contentType })\n\n      const mapSchema = async ([name, schema]: [string, OasTypes.SchemaObject]) => {\n        const resolvedPath = this.resolvePath({\n          baseName: `${name}.json`,\n          pluginKey: this.plugin.key,\n        })\n\n        const resvoledFileName = this.resolveName({\n          name: `${name}.json`,\n          pluginKey: [pluginOasName],\n          type: 'file',\n        }) as `${string}.json`\n\n        if (!resolvedPath) {\n          return\n        }\n\n        await this.addFile({\n          path: resolvedPath,\n          baseName: resvoledFileName,\n          source: JSON.stringify(schema),\n          meta: {\n            pluginKey: this.plugin.key,\n          },\n        })\n      }\n\n      const promises = Object.entries(schemas).map(mapSchema)\n      await Promise.all(promises)\n    },\n  }\n})\n","import { type FileMetaBase, Generator } from '@kubb/core'\nimport transformers from '@kubb/core/transformers'\n\nimport type { PluginFactoryOptions, PluginManager } from '@kubb/core'\nimport type * as KubbFile from '@kubb/fs/types'\n\nimport type { Plugin } from '@kubb/core'\nimport type { HttpMethod, Oas, OasTypes, Operation, contentType } from '@kubb/oas'\nimport type { Exclude, Include, OperationSchemas, OperationsByMethod, Override } from './types.ts'\n\nexport type GetOperationGeneratorOptions<T extends OperationGenerator<any, any, any>> = T extends OperationGenerator<infer Options, any, any> ? Options : never\n\nexport type OperationMethodResult<TFileMeta extends FileMetaBase> = Promise<KubbFile.File<TFileMeta> | Array<KubbFile.File<TFileMeta>> | null>\n\ntype Context<TOptions, TPluginOptions extends PluginFactoryOptions> = {\n  oas: Oas\n  exclude: Array<Exclude> | undefined\n  include: Array<Include> | undefined\n  override: Array<Override<TOptions>> | undefined\n  contentType: contentType | undefined\n  pluginManager: PluginManager\n  /**\n   * Current plugin\n   */\n  plugin: Plugin<TPluginOptions>\n  mode: KubbFile.Mode\n}\n\nexport abstract class OperationGenerator<\n  TOptions = unknown,\n  TPluginOptions extends PluginFactoryOptions = PluginFactoryOptions,\n  TFileMeta extends FileMetaBase = FileMetaBase,\n> extends Generator<TOptions, Context<TOptions, TPluginOptions>> {\n  #operationsByMethod: OperationsByMethod = {}\n  get operationsByMethod(): OperationsByMethod {\n    return this.#operationsByMethod\n  }\n\n  set operationsByMethod(paths: OperationsByMethod) {\n    this.#operationsByMethod = paths\n  }\n\n  #getOptions(operation: Operation, method: HttpMethod): Partial<TOptions> {\n    const { override = [] } = this.context\n\n    return (\n      override.find(({ pattern, type }) => {\n        if (type === 'tag') {\n          return !!operation.getTags()[0]?.name.match(pattern)\n        }\n\n        if (type === 'operationId') {\n          return !!operation.getOperationId().match(pattern)\n        }\n\n        if (type === 'path') {\n          return !!operation.path.match(pattern)\n        }\n\n        if (type === 'method') {\n          return !!method.match(pattern)\n        }\n\n        return false\n      })?.options || {}\n    )\n  }\n  /**\n   *\n   * @deprecated\n   */\n  #isExcluded(operation: Operation, method: HttpMethod): boolean {\n    const { exclude = [] } = this.context\n    let matched = false\n\n    exclude.forEach(({ pattern, type }) => {\n      if (type === 'tag' && !matched) {\n        matched = !!operation.getTags()[0]?.name.match(pattern)\n      }\n\n      if (type === 'operationId' && !matched) {\n        matched = !!operation.getOperationId().match(pattern)\n      }\n\n      if (type === 'path' && !matched) {\n        matched = !!operation.path.match(pattern)\n      }\n\n      if (type === 'method' && !matched) {\n        matched = !!method.match(pattern)\n      }\n    })\n\n    return matched\n  }\n  /**\n   *\n   * @deprecated\n   */\n  #isIncluded(operation: Operation, method: HttpMethod): boolean {\n    const { include = [] } = this.context\n    let matched = false\n\n    include.forEach(({ pattern, type }) => {\n      if (type === 'tag' && !matched) {\n        matched = !!operation.getTags()[0]?.name.match(pattern)\n      }\n\n      if (type === 'operationId' && !matched) {\n        matched = !!operation.getOperationId().match(pattern)\n      }\n\n      if (type === 'path' && !matched) {\n        matched = !!operation.path.match(pattern)\n      }\n\n      if (type === 'method' && !matched) {\n        matched = !!method.match(pattern)\n      }\n    })\n\n    return matched\n  }\n\n  getSchemas(\n    operation: Operation,\n    { forStatusCode, resolveName = (name) => name }: { forStatusCode?: string | number; resolveName?: (name: string) => string } = {},\n  ): OperationSchemas {\n    const pathParamsSchema = this.context.oas.getParametersSchema(operation, 'path')\n    const queryParamsSchema = this.context.oas.getParametersSchema(operation, 'query')\n    const headerParamsSchema = this.context.oas.getParametersSchema(operation, 'header')\n    const requestSchema = this.context.oas.getRequestSchema(operation)\n    const responseStatusCode =\n      forStatusCode || (operation.schema.responses && Object.keys(operation.schema.responses).find((key) => key.startsWith('2'))) || 200\n    const responseSchema = this.context.oas.getResponseSchema(operation, responseStatusCode)\n    const statusCodes = operation.getResponseStatusCodes().map((statusCode) => {\n      let name = statusCode\n      if (name === 'default') {\n        name = 'error'\n      }\n\n      const schema = this.context.oas.getResponseSchema(operation, statusCode)\n\n      return {\n        name: resolveName(transformers.pascalCase(`${operation.getOperationId()} ${name}`)),\n        description: (operation.getResponseByStatusCode(statusCode) as OasTypes.ResponseObject)?.description,\n        schema,\n        operation,\n        operationName: transformers.pascalCase(`${operation.getOperationId()}`),\n        statusCode: name === 'error' ? undefined : Number(statusCode),\n        keys: schema?.properties ? Object.keys(schema.properties) : undefined,\n      }\n    })\n\n    return {\n      pathParams: pathParamsSchema\n        ? {\n            name: resolveName(transformers.pascalCase(`${operation.getOperationId()} PathParams`)),\n            operation,\n            operationName: transformers.pascalCase(`${operation.getOperationId()}`),\n            schema: pathParamsSchema,\n            keys: pathParamsSchema.properties ? Object.keys(pathParamsSchema.properties) : undefined,\n          }\n        : undefined,\n      queryParams: queryParamsSchema\n        ? {\n            name: resolveName(transformers.pascalCase(`${operation.getOperationId()} QueryParams`)),\n            operation,\n            operationName: transformers.pascalCase(`${operation.getOperationId()}`),\n            schema: queryParamsSchema,\n            keys: queryParamsSchema.properties ? Object.keys(queryParamsSchema.properties) : [],\n          }\n        : undefined,\n      headerParams: headerParamsSchema\n        ? {\n            name: resolveName(transformers.pascalCase(`${operation.getOperationId()} HeaderParams`)),\n            operation,\n            operationName: transformers.pascalCase(`${operation.getOperationId()}`),\n            schema: headerParamsSchema,\n            keys: headerParamsSchema.properties ? Object.keys(headerParamsSchema.properties) : undefined,\n          }\n        : undefined,\n      request: requestSchema\n        ? {\n            name: resolveName(transformers.pascalCase(`${operation.getOperationId()} ${operation.method === 'get' ? 'queryRequest' : 'mutationRequest'}`)),\n            description: (operation.schema.requestBody as OasTypes.RequestBodyObject)?.description,\n            operation,\n            operationName: transformers.pascalCase(`${operation.getOperationId()}`),\n            schema: requestSchema,\n            keys: requestSchema.properties ? Object.keys(requestSchema.properties) : undefined,\n            keysToOmit: requestSchema.properties\n              ? Object.keys(requestSchema.properties).filter((key) => {\n                  const item = requestSchema.properties?.[key] as OasTypes.SchemaObject\n\n                  return item?.readOnly\n                })\n              : undefined,\n          }\n        : undefined,\n      response: {\n        name: resolveName(transformers.pascalCase(`${operation.getOperationId()} ${operation.method === 'get' ? 'queryResponse' : 'mutationResponse'}`)),\n        description: operation.getResponseAsJSONSchema(responseStatusCode)?.at(0)?.description,\n        operation,\n        operationName: transformers.pascalCase(`${operation.getOperationId()}`),\n        schema: responseSchema,\n        statusCode: Number(responseStatusCode),\n        keys: responseSchema?.properties ? Object.keys(responseSchema.properties) : undefined,\n        keysToOmit: responseSchema?.properties\n          ? Object.keys(responseSchema.properties).filter((key) => {\n              const item = responseSchema.properties?.[key] as OasTypes.SchemaObject\n              return item?.writeOnly\n            })\n          : undefined,\n      },\n      errors: statusCodes.filter((item) => item.statusCode?.toString().startsWith('4') || item.statusCode?.toString().startsWith('5')),\n      statusCodes,\n    }\n  }\n\n  get #methods() {\n    return {\n      get: this.get,\n      post: this.post,\n      patch: this.patch,\n      put: this.put,\n      delete: this.delete,\n      head: undefined,\n      options: undefined,\n      trace: undefined,\n    } as const\n  }\n\n  async build(): Promise<Array<KubbFile.File<TFileMeta>>> {\n    const { oas } = this.context\n\n    const paths = oas.getPaths()\n    this.operationsByMethod = Object.entries(paths).reduce((acc, [path, method]) => {\n      const methods = Object.keys(method) as HttpMethod[]\n\n      methods.forEach((method) => {\n        const operation = oas.operation(path, method)\n        if (operation && this.#methods[method]) {\n          const isExcluded = this.#isExcluded(operation, method)\n          const isIncluded = this.context.include ? this.#isIncluded(operation, method) : true\n\n          if (isIncluded && !isExcluded) {\n            if (!acc[path]) {\n              acc[path] = {} as OperationsByMethod['get']\n            }\n            acc[path] = {\n              ...acc[path],\n              [method]: {\n                operation,\n                schemas: this.getSchemas(operation),\n              },\n            } as OperationsByMethod['get']\n          }\n        }\n      })\n\n      return acc\n    }, {} as OperationsByMethod)\n\n    const promises = Object.keys(this.operationsByMethod).reduce((acc, path) => {\n      const methods = this.operationsByMethod[path] ? (Object.keys(this.operationsByMethod[path]!) as HttpMethod[]) : []\n\n      methods.forEach((method) => {\n        const { operation } = this.operationsByMethod[path]?.[method]!\n        const options = this.#getOptions(operation, method)\n        const promiseMethod = this.#methods[method]?.call(this, operation, {\n          ...this.options,\n          ...options,\n        })\n        const promiseOperation = this.operation.call(this, operation, {\n          ...this.options,\n          ...options,\n        })\n\n        if (promiseMethod) {\n          acc.push(promiseMethod)\n        }\n        if (promiseOperation) {\n          acc.push(promiseOperation)\n        }\n      })\n\n      return acc\n    }, [] as OperationMethodResult<TFileMeta>[])\n\n    const operations = Object.values(this.operationsByMethod).map((item) => Object.values(item).map((item) => item.operation))\n\n    promises.push(this.all(operations.flat().filter(Boolean), this.operationsByMethod))\n\n    const files = await Promise.all(promises)\n\n    // using .flat because operationGenerator[method] can return a array of files or just one file\n    return files.flat().filter(Boolean)\n  }\n\n  /**\n   * Operation\n   */\n  async operation(operation: Operation, options: TOptions): OperationMethodResult<TFileMeta> {\n    return null\n  }\n\n  /**\n   * GET\n   */\n  async get(operation: Operation, options: TOptions): OperationMethodResult<TFileMeta> {\n    return null\n  }\n\n  /**\n   * POST\n   */\n  async post(operation: Operation, options: TOptions): OperationMethodResult<TFileMeta> {\n    return null\n  }\n  /**\n   * PATCH\n   */\n  async patch(operation: Operation, options: TOptions): OperationMethodResult<TFileMeta> {\n    return null\n  }\n\n  /**\n   * PUT\n   */\n  async put(operation: Operation, options: TOptions): OperationMethodResult<TFileMeta> {\n    return null\n  }\n\n  /**\n   * DELETE\n   */\n  async delete(operation: Operation, options: TOptions): OperationMethodResult<TFileMeta> {\n    return null\n  }\n\n  /**\n   * Combination of GET, POST, PATCH, PUT, DELETE\n   */\n  async all(operations: Operation[], paths: OperationsByMethod): OperationMethodResult<TFileMeta> {\n    return null\n  }\n}\n"],"mappings":"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","names":["path","path","method","item"]}