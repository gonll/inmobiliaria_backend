{"version":3,"sources":["/home/runner/work/kubb/kubb/packages/oas/dist/parser.cjs","../src/parser/index.ts"],"names":[],"mappings":"AAAA;AACE;AACA;AACF,wDAA6B;AAC7B;AACA;ACLA,oDAAmC;AACnC,yGAAyB;AACzB,oHAA4B;AAQ5B,MAAA,SAAsB,KAAA,CAAM,SAAA,EAAiC,SAAA,EAAuB,qBAAA,EAAmB;AACrG,EAAA,GAAA,CAAI,OAAO,UAAA,IAAc,QAAA,EAAU;AAEjC,IAAA,MAAM,OAAA,EAAS,MAAM,qCAAA,CAAW;AAChC,IAAA,MAAM,cAAA,EAAgB,MAAM,iCAAA,EAAS,GAAA,EAAK,SAAA,EAAW,MAAA,EAAQ,IAAA,EAAM,UAAU,CAAC,CAAA;AAE9E,IAAA,OAAO,KAAA,CAAM,aAAA,CAAc,MAAA,CAAO,MAAM,CAAA;AAAA,EAC1C;AAEA,EAAA,MAAM,aAAA,EAAe,IAAI,2BAAA,CAAa,SAAA,EAAW;AAAA,IAC/C,WAAA,EAAa,IAAA;AAAA,IACb,cAAA,EAAgB;AAAA,EAClB,CAAC,CAAA;AACD,EAAA,MAAM,SAAA,EAAY,MAAM,YAAA,CAAa,IAAA,CAAK,CAAA;AAE1C,EAAA,GAAA,CAAI,mDAAA,QAA4B,CAAA,EAAG;AACjC,IAAA,MAAM,EAAE,QAAQ,EAAA,EAAI,MAAM,yBAAA,CAAgB,UAAA,CAAW,QAAA,EAAU;AAAA,MAC7D,OAAA,EAAS;AAAA,IACX,CAAC,CAAA;AAED,IAAA,OAAO,IAAI,QAAA,CAAS,EAAE,GAAA,EAAK,QAAuB,CAAC,CAAA;AAAA,EACrD;AAEA,EAAA,OAAO,IAAI,QAAA,CAAS,EAAE,GAAA,EAAK,SAAwB,CAAC,CAAA;AACtD;ADNA;AACE;AACF,sBAAC","file":"/home/runner/work/kubb/kubb/packages/oas/dist/parser.cjs","sourcesContent":[null,"import { bundle, loadConfig } from '@redocly/openapi-core'\nimport OASNormalize from 'oas-normalize'\nimport swagger2openapi from 'swagger2openapi'\n\nimport { Oas } from '../Oas.ts'\nimport { isOpenApiV2Document } from '../utils.ts'\n\nimport type { OASDocument } from 'oas/types'\nimport type { OpenAPI } from 'openapi-types'\n\nexport async function parse(pathOrApi: string | OASDocument, oasClass: typeof Oas = Oas): Promise<Oas> {\n  if (typeof pathOrApi === 'string') {\n    // resolve external refs\n    const config = await loadConfig()\n    const bundleResults = await bundle({ ref: pathOrApi, config, base: pathOrApi })\n\n    return parse(bundleResults.bundle.parsed)\n  }\n\n  const oasNormalize = new OASNormalize(pathOrApi, {\n    enablePaths: true,\n    colorizeErrors: true,\n  })\n  const document = (await oasNormalize.load()) as OpenAPI.Document\n\n  if (isOpenApiV2Document(document)) {\n    const { openapi } = await swagger2openapi.convertObj(document, {\n      anchors: true,\n    })\n\n    return new oasClass({ oas: openapi as OASDocument })\n  }\n\n  return new oasClass({ oas: document as OASDocument })\n}\n"]}