{"version":3,"sources":["../src/runtime.ts","../src/index.ts"],"names":["runtime_exports","__export","get","getVersion","importer","isBun","isDeno","isJest","isNode","runtimes","switcher","runtime","obj","fallback","imports","src_default"],"mappings":"0FAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,SAAAE,EAAA,eAAAC,EAAA,aAAAC,EAAA,UAAAC,EAAA,WAAAC,EAAA,WAAAC,EAAA,WAAAC,EAAA,aAAAC,EAAA,aAAAC,IAAO,IAAMD,EAAW,CACtB,IAAK,WAAW,IAChB,KAAM,WAAW,KACjB,KAAM,OAEN,KAAM,WAAW,IACnB,EAOO,SAASP,GAAe,CAC7B,OAAIO,EAAS,IACJ,MAELA,EAAS,KACJ,OAGLA,EAAS,KACJ,OAGF,MACT,CAEO,SAASJ,GAAiB,CAC/B,OAAOH,EAAI,IAAM,KACnB,CAEO,SAASI,GAAkB,CAChC,OAAOJ,EAAI,IAAM,MACnB,CAEO,SAASM,GAAkB,CAChC,OAAON,EAAI,IAAM,MACnB,CAEO,SAASK,GAAkB,CAChC,OAAOL,EAAI,IAAM,MACnB,CAKO,SAASC,GAAqB,CACnC,IAAMQ,EAAUT,EAAI,EAEpB,OAAQS,EAAS,CACf,IAAK,MACH,OAAO,WAAW,IAAI,QACxB,IAAK,OACH,OAAO,WAAW,KAAK,QAAQ,KACjC,IAAK,OACH,OAAO,WAAW,QAAQ,QAAQ,UAAU,CAAC,EAC/C,QACE,MAAM,IAAI,MAAM,gCAAgCA,CAAO,EAAE,CAC7D,CACF,CASO,SAASD,EAAkBE,EAAwCC,EAAyC,CACjH,IAAMF,EAAUT,EAAI,EAEpB,OAAOU,EAAIC,GAAYF,CAAO,CAChC,CAWA,eAAsBP,EAAkBU,EAA2CD,EAAkD,CACnI,IAAMF,EAAUT,EAAI,EAEpB,OAAO,OAAQY,EAAoCD,GAAYF,CAAO,EACxE,CCrFA,IAAOI,EAAQf","sourcesContent":["export const runtimes = {\n  bun: globalThis.Bun,\n  deno: globalThis.Deno,\n  node: undefined,\n  //for testing\n  jest: globalThis.jest,\n} as const\n\nexport type Runtime = keyof typeof runtimes\n\n/**\n * Return the current runtime.\n */\nexport function get(): Runtime {\n  if (runtimes.bun) {\n    return 'bun'\n  }\n  if (runtimes.deno) {\n    return 'deno'\n  }\n\n  if (runtimes.jest) {\n    return 'jest'\n  }\n\n  return 'node'\n}\n\nexport function isBun(): boolean {\n  return get() === 'bun'\n}\n\nexport function isDeno(): boolean {\n  return get() === 'deno'\n}\n\nexport function isNode(): boolean {\n  return get() === 'node'\n}\n\nexport function isJest(): boolean {\n  return get() === 'jest'\n}\n\n/**\n * Retrieve the version used in the current runtime.\n */\nexport function getVersion(): string {\n  const runtime = get()\n\n  switch (runtime) {\n    case 'bun':\n      return globalThis.Bun.version\n    case 'deno':\n      return globalThis.Deno.version.deno\n    case 'node':\n      return globalThis.process.version.substring(1)\n    default:\n      throw new Error(`No runtime version found for ${runtime}`)\n  }\n}\n/**\n * Switch based on the current runtime.\n */\nexport function switcher<TOutput>(obj: Partial<Record<Runtime, TOutput>>): TOutput | undefined\nexport function switcher<TOutput, TFallback extends string = Runtime>(\n  obj: Partial<Record<Runtime, TOutput>> & Record<TFallback, TOutput>,\n  fallback: TFallback,\n): TOutput\nexport function switcher<TOutput>(obj: Partial<Record<Runtime, TOutput>>, fallback?: Runtime): TOutput | undefined {\n  const runtime = get()\n\n  return obj[fallback ?? runtime]\n}\n\n/**\n * Dynamic import based on switch data, see runtimeSwitch.\n */\n\nexport function importer<TOutput>(imports: Partial<Record<Runtime, string>>): Promise<TOutput | undefined>\nexport function importer<TOutput, TFallback extends string = Runtime>(\n  imports: Partial<Record<Runtime, string>> & Record<TFallback, string>,\n  fallback: TFallback,\n): Promise<TOutput>\nexport async function importer<TOutput>(imports: Partial<Record<Runtime, string>>, fallback?: Runtime): Promise<TOutput | undefined> {\n  const runtime = get()\n\n  return import((imports as Record<Runtime, string>)[fallback ?? runtime])\n}\n","import * as runtime from './runtime'\nexport * from './runtime'\nexport { runtime }\nexport default runtime\n"]}