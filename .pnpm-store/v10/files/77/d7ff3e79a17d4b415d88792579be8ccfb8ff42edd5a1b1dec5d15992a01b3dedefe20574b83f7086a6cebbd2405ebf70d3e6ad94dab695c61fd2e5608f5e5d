{"version":3,"sources":["/home/runner/work/kubb/kubb/packages/react/dist/server.cjs","../src/server/index.ts","../src/server/createRootServer.ts","../src/server/format.ts"],"names":[],"mappings":"AAAA;AACE;AACA;AACF,wDAA6B;AAC7B;AACE;AACF,wDAA6B;AAC7B;AACA;ACRA,8CAAA,CAAA;ADUA;AACA;AEXA,8CAAA,CAAA;AFaA;AACA;AGdA,8CAAA,CAAA;AAAA,oCAAyC;AACzC,iHAA6B;AAI7B,IAAM,cAAA,EAAyB;AAAA,EAC7B,QAAA,EAAU,CAAA;AAAA,EACV,UAAA,EAAY,GAAA;AAAA,EACZ,MAAA,EAAQ,YAAA;AAAA,EACR,WAAA,EAAa,IAAA;AAAA,EACb,IAAA,EAAM,KAAA;AAAA,EACN,eAAA,EAAiB,KAAA;AAAA,EACjB,SAAA,EAAW,MAAA;AAAA,EACX,OAAA,EAAS,CAAC,oBAAgB;AAC5B,CAAA;AACO,SAAS,MAAA,CAAO,MAAA,EAAkC;AACvD,EAAA,GAAA,CAAI,CAAC,MAAA,EAAQ;AACX,IAAA,OAAO,OAAA,CAAQ,OAAA,CAAQ,EAAE,CAAA;AAAA,EAC3B;AACA,EAAA,OAAO,8BAAA,MAAe,EAAQ,aAAa,CAAA;AAC7C;AHcA;AACA;AE1BA,IAAM,UAAA,kBAAY,IAAI,GAAA,CAA2B,CAAA;AAO1C,SAAS,gBAAA,CAAsE,EAAE,SAAA,EAAW,OAAO,CAAA,EAA6B;AACrI,EAAA,GAAA,CAAI,CAAC,SAAA,EAAW;AACd,IAAA,UAAA,EAAY,0CAAA,WAAsB,CAAA;AAAA,EACpC;AAEA,EAAA,MAAM,SAAA,EAAW,IAAI,oCAAA,CAAuB,SAAA,EAAW,EAAE,OAAO,CAAC,CAAA;AACjE,EAAA,SAAA,CAAU,GAAA,CAAI,QAAA,CAAS,EAAA,EAAI,QAAQ,CAAA;AAEnC,EAAA,OAAO;AAAA,IACL,cAAA,CAAe,QAAA,EAAU,OAAA,EAAmB;AAC1C,MAAA,QAAA,CAAS,MAAA,CAAO,QAAA,EAAU,OAAO,CAAA;AACjC,MAAA,OAAO,MAAA,CAAO,QAAA,CAAS,MAAM,CAAA;AAAA,IAC/B,CAAA;AAAA,IACA,OAAA,CAAA,EAAU;AACR,MAAA,QAAA,CAAS,OAAA,CAAQ,CAAA;AACjB,MAAA,SAAA,CAAU,MAAA,CAAO,QAAA,CAAS,EAAE,CAAA;AAAA,IAC9B,CAAA;AAAA,IACA,IAAI,KAAA,CAAA,EAAQ;AACV,MAAA,OAAO,QAAA,CAAS,KAAA;AAAA,IAClB,CAAA;AAAA,IACA,OAAA,CAAQ,EAAA,EAAY;AAClB,MAAA,OAAO,QAAA,CAAS,KAAA,CAAM,IAAA,CAAK,CAAC,IAAA,EAAA,GAAS,IAAA,CAAK,GAAA,IAAO,EAAE,CAAA;AAAA,IACrD;AAAA,EACF,CAAA;AACF;AFoBA;AACA;ACxDA,IAAO,eAAA,EAAQ,gBAAA;AD0Df;AACE;AACA;AACF,8EAAC","file":"/home/runner/work/kubb/kubb/packages/react/dist/server.cjs","sourcesContent":[null,"import { createRootServer } from './createRootServer.ts'\n\nexport { createRootServer } from './createRootServer.ts'\nexport type * from './types.ts'\n\nexport default createRootServer\n","import { ReactTemplate } from '../shared/ReactTemplate.tsx'\nimport { createNode } from '../shared/dom.ts'\nimport { format } from './format.ts'\n\nimport type { Logger } from '@kubb/core/logger'\nimport type { RootContextProps } from '../components/Root.tsx'\nimport type { DOMElement } from '../types.ts'\nimport type { RootType } from './types.ts'\n\nconst instances = new Map<string, ReactTemplate>()\n\ntype Props = {\n  container?: DOMElement\n  logger?: Logger\n}\n\nexport function createRootServer<Context extends RootContextProps = RootContextProps>({ container, logger }: Props): RootType<Context> {\n  if (!container) {\n    container = createNode('kubb-root')\n  }\n\n  const instance = new ReactTemplate<Context>(container, { logger })\n  instances.set(instance.id, instance)\n\n  return {\n    renderToString(children, context?: Context) {\n      instance.render(children, context)\n      return format(instance.output)\n    },\n    unmount() {\n      instance.unmount()\n      instances.delete(instance.id)\n    },\n    get files() {\n      return instance.files\n    },\n    getFile(id: string) {\n      return instance.files.find((file) => file.id === id)\n    },\n  }\n}\n","import { format as prettierFormat } from 'prettier'\nimport pluginTypescript from 'prettier/plugins/typescript'\n\nimport type { Options } from 'prettier'\n\nconst formatOptions: Options = {\n  tabWidth: 2,\n  printWidth: 160,\n  parser: 'typescript',\n  singleQuote: true,\n  semi: false,\n  bracketSameLine: false,\n  endOfLine: 'auto',\n  plugins: [pluginTypescript],\n}\nexport function format(source?: string): Promise<string> {\n  if (!source) {\n    return Promise.resolve('')\n  }\n  return prettierFormat(source, formatOptions)\n}\n"]}