{"version":3,"file":"validate-C2Mxy9Zc.cjs","names":["jiti"],"sources":["../src/commands/validate.ts"],"sourcesContent":["import process from 'node:process'\nimport type { ArgsDef } from 'citty'\nimport { defineCommand, showUsage } from 'citty'\nimport { createJiti } from 'jiti'\n\nconst jiti = createJiti(import.meta.url, {\n  sourceMaps: true,\n})\n\nconst args = {\n  input: {\n    type: 'string',\n    description: 'Path to Swagger/OpenAPI file',\n    alias: 'i',\n  },\n  help: {\n    type: 'boolean',\n    description: 'Show help',\n    alias: 'h',\n    default: false,\n  },\n} as const satisfies ArgsDef\n\nconst command = defineCommand({\n  meta: {\n    name: 'validate',\n    description: 'Validate a Swagger/OpenAPI file',\n  },\n  args,\n  async run(commandContext) {\n    const { args } = commandContext\n\n    if (args.help) {\n      return showUsage(command)\n    }\n\n    if (args.input) {\n      let mod: any\n      try {\n        mod = await jiti.import('@kubb/oas', { default: true })\n      } catch (_e) {\n        console.error(`Import of '@kubb/oas' is required to do validation`)\n      }\n\n      const { parse } = mod\n      try {\n        const oas = await parse(args.input)\n        await oas.validate()\n\n        console.log('✅ Validation success')\n      } catch (error) {\n        console.error('❌ Validation failed')\n        console.log((error as Error)?.message)\n        process.exit(1)\n      }\n    }\n  },\n})\n\nexport default command\n"],"mappings":";;;;;;;AAKA,MAAMA,6EAAmC,EACvC,YAAY,MACb,CAAC;AAgBF,MAAM,mCAAwB;CAC5B,MAAM;EACJ,MAAM;EACN,aAAa;EACd;CACD,MAnBW;EACX,OAAO;GACL,MAAM;GACN,aAAa;GACb,OAAO;GACR;EACD,MAAM;GACJ,MAAM;GACN,aAAa;GACb,OAAO;GACP,SAAS;GACV;EACF;CAQC,MAAM,IAAI,gBAAgB;EACxB,MAAM,EAAE,SAAS;AAEjB,MAAI,KAAK,KACP,6BAAiB,QAAQ;AAG3B,MAAI,KAAK,OAAO;GACd,IAAI;AACJ,OAAI;AACF,UAAM,MAAMA,OAAK,OAAO,aAAa,EAAE,SAAS,MAAM,CAAC;YAChD,IAAI;AACX,YAAQ,MAAM,qDAAqD;;GAGrE,MAAM,EAAE,UAAU;AAClB,OAAI;AAEF,WADY,MAAM,MAAM,KAAK,MAAM,EACzB,UAAU;AAEpB,YAAQ,IAAI,uBAAuB;YAC5B,OAAO;AACd,YAAQ,MAAM,sBAAsB;AACpC,YAAQ,IAAK,OAAiB,QAAQ;AACtC,yBAAQ,KAAK,EAAE;;;;CAItB,CAAC;AAEF,uBAAe"}