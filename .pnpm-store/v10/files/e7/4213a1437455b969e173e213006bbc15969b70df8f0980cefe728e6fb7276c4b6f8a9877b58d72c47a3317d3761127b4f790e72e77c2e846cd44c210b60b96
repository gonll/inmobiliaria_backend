{"version":3,"sources":["../src/utils/FunctionParams.ts","../src/utils/promise.ts","../src/utils/renderTemplate.ts","../src/utils/timeout.ts","../src/utils/uniqueName.ts","../src/utils/URLPath.ts","../src/utils/getParser.ts"],"sourcesContent":["import { orderBy } from 'natural-orderby'\n\nimport { camelCase } from '../transformers/casing.ts'\n\ntype FunctionParamsASTWithoutType = {\n  name?: string\n  type?: string\n  /**\n   * @default true\n   */\n  required?: boolean\n  /**\n   * @default true\n   */\n  enabled?: boolean\n  default?: string\n}\n\ntype FunctionParamsASTWithType = {\n  name?: never\n  type: string\n  /**\n   * @default true\n   */\n  required?: boolean\n  /**\n   * @default true\n   */\n  enabled?: boolean\n  default?: string\n}\n/**\n * @deprecated\n */\nexport type FunctionParamsAST = FunctionParamsASTWithoutType | FunctionParamsASTWithType\n\n/**\n * @deprecated\n */\nexport class FunctionParams {\n  #items: Array<FunctionParamsAST | FunctionParamsAST[]> = []\n  constructor() {\n    return this\n  }\n\n  get items(): FunctionParamsAST[] {\n    return this.#items.flat()\n  }\n\n  add(item: FunctionParamsAST | Array<FunctionParamsAST | FunctionParamsAST[] | undefined> | undefined): FunctionParams {\n    if (!item) {\n      return this\n    }\n\n    if (Array.isArray(item)) {\n      item.filter(Boolean).forEach((it) => this.#items.push(it))\n      return this\n    }\n    this.#items.push(item)\n\n    return this\n  }\n  static #orderItems(items: Array<FunctionParamsAST | FunctionParamsAST[]>) {\n    return orderBy(\n      items.filter(Boolean),\n      [\n        (v) => {\n          if (Array.isArray(v)) {\n            return undefined\n          }\n          return !v.default\n        },\n        (v) => {\n          if (Array.isArray(v)) {\n            return undefined\n          }\n          return v.required ?? true\n        },\n      ],\n      ['desc', 'desc'],\n    )\n  }\n\n  static #addParams(acc: string[], item: FunctionParamsAST) {\n    const { enabled = true, name, type, required = true, ...rest } = item\n\n    if (!enabled) {\n      return acc\n    }\n\n    if (!name) {\n      // when name is not se we will use TypeScript generics\n      acc.push(`${type}${rest.default ? ` = ${rest.default}` : ''}`)\n\n      return acc\n    }\n    // TODO check whey we still need the camelcase here\n    const parameterName = name.startsWith('{') ? name : camelCase(name)\n\n    if (type) {\n      if (required) {\n        acc.push(`${parameterName}: ${type}${rest.default ? ` = ${rest.default}` : ''}`)\n      } else {\n        acc.push(`${parameterName}?: ${type}`)\n      }\n    } else {\n      acc.push(`${parameterName}`)\n    }\n\n    return acc\n  }\n\n  static toObject(items: FunctionParamsAST[]): FunctionParamsAST {\n    let type: string[] = []\n    let name: string[] = []\n\n    const enabled = items.every((item) => item.enabled) ? items.at(0)?.enabled : true\n    const required = items.every((item) => item.required) ?? true\n\n    items.forEach((item) => {\n      name = FunctionParams.#addParams(name, { ...item, type: undefined })\n      if (items.some((item) => item.type)) {\n        type = FunctionParams.#addParams(type, item)\n      }\n    })\n\n    return {\n      name: `{ ${name.join(', ')} }`,\n      type: type.length ? `{ ${type.join('; ')} }` : undefined,\n      enabled,\n      required,\n    }\n  }\n\n  static toString(items: (FunctionParamsAST | FunctionParamsAST[])[]): string {\n    const sortedData = FunctionParams.#orderItems(items)\n\n    return sortedData\n      .reduce((acc, item) => {\n        if (Array.isArray(item)) {\n          if (item.length <= 0) {\n            return acc\n          }\n          const subItems = FunctionParams.#orderItems(item) as FunctionParamsAST[]\n          const objectItem = FunctionParams.toObject(subItems)\n\n          return FunctionParams.#addParams(acc, objectItem)\n        }\n\n        return FunctionParams.#addParams(acc, item)\n      }, [] as string[])\n      .join(', ')\n  }\n\n  toObject(): FunctionParamsAST {\n    const items = FunctionParams.#orderItems(this.#items).flat()\n\n    return FunctionParams.toObject(items)\n  }\n\n  toString(): string {\n    const items = FunctionParams.#orderItems(this.#items)\n\n    return FunctionParams.toString(items)\n  }\n}\n","import type { PossiblePromise } from '@kubb/types'\n\nexport function isPromise<T>(result: PossiblePromise<T>): result is Promise<T> {\n  return !!result && typeof (result as Promise<unknown>)?.then === 'function'\n}\n\nexport function isPromiseFulfilledResult<T = unknown>(result: PromiseSettledResult<unknown>): result is PromiseFulfilledResult<T> {\n  return result.status === 'fulfilled'\n}\n\nexport function isPromiseRejectedResult<T>(result: PromiseSettledResult<unknown>): result is Omit<PromiseRejectedResult, 'reason'> & { reason: T } {\n  return result.status === 'rejected'\n}\n","export function renderTemplate<TData extends Record<string, unknown> = Record<string, unknown>>(template: string, data: TData | undefined = undefined): string {\n  if (!data || !Object.keys(data).length) {\n    return template.replace(/{{(.*?)}}/g, '')\n  }\n\n  const matches = template.match(/{{(.*?)}}/g)\n\n  return (\n    matches?.reduce((prev, curr) => {\n      const index = curr.split(/{{|}}/).filter(Boolean)[0]?.trim()\n      if (index === undefined) {\n        return prev\n      }\n      const value = data[index]\n\n      if (value === undefined) {\n        return prev\n      }\n\n      return prev\n        .replace(curr, () => {\n          if (typeof value === 'boolean') {\n            return `${value.toString()}` || 'false'\n          }\n\n          return (value as string) || ''\n        })\n        .trim()\n    }, template) || ''\n  )\n}\n","export async function timeout(ms: number): Promise<unknown> {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(true)\n    }, ms)\n  })\n}\n","export function getUniqueName(originalName: string, data: Record<string, number>): string {\n  let used = data[originalName] || 0\n  if (used) {\n    data[originalName] = ++used\n    originalName += used\n  }\n  data[originalName] = 1\n  return originalName\n}\n\nexport function setUniqueName(originalName: string, data: Record<string, number>): string {\n  let used = data[originalName] || 0\n  if (used) {\n    data[originalName] = ++used\n\n    return originalName\n  }\n  data[originalName] = 1\n  return originalName\n}\n","import { camelCase } from '../transformers/casing.ts'\n\nexport type URLObject = {\n  url: string\n  params?: Record<string, string>\n}\n\ntype ObjectOptions = {\n  type?: 'path' | 'template'\n  replacer?: (pathParam: string) => string\n  stringify?: boolean\n}\n\nexport class URLPath {\n  path: string\n\n  constructor(path: string) {\n    this.path = path\n\n    return this\n  }\n\n  /**\n   * Convert Swagger path to URLPath(syntax of Express)\n   * @example /pet/{petId} => /pet/:petId\n   */\n  get URL(): string {\n    return this.toURLPath()\n  }\n  get isURL(): boolean {\n    try {\n      const url = new URL(this.path)\n      if (url?.href) {\n        return true\n      }\n    } catch (error) {\n      return false\n    }\n    return false\n  }\n\n  /**\n   * Convert Swagger path to template literals/ template strings(camelcase)\n   * @example /pet/{petId} => `/pet/${petId}`\n   * @example /account/monetary-accountID => `/account/${monetaryAccountId}`\n   * @example /account/userID => `/account/${userId}`\n   */\n  get template(): string {\n    return this.toTemplateString()\n  }\n  get object(): URLObject | string {\n    return this.toObject()\n  }\n  get params(): Record<string, string> | undefined {\n    return this.getParams()\n  }\n\n  toObject({ type = 'path', replacer, stringify }: ObjectOptions = {}): URLObject | string {\n    const object = {\n      url: type === 'path' ? this.toURLPath() : this.toTemplateString(replacer),\n      params: this.getParams(),\n    }\n\n    if (stringify) {\n      if (type === 'template') {\n        return JSON.stringify(object).replaceAll(\"'\", '').replaceAll(`\"`, '')\n      }\n\n      if (object.params) {\n        return `{ url: '${object.url}', params: ${JSON.stringify(object.params).replaceAll(\"'\", '').replaceAll(`\"`, '')} }`\n      }\n\n      return `{ url: '${object.url}' }`\n    }\n\n    return object\n  }\n\n  /**\n   * Convert Swagger path to template literals/ template strings(camelcase)\n   * @example /pet/{petId} => `/pet/${petId}`\n   * @example /account/monetary-accountID => `/account/${monetaryAccountId}`\n   * @example /account/userID => `/account/${userId}`\n   */\n  toTemplateString(replacer?: (pathParam: string) => string): string {\n    const regex = /{(\\w|-)*}/g\n    const found = this.path.match(regex)\n    let newPath = this.path.replaceAll('{', '${')\n\n    if (found) {\n      newPath = found.reduce((prev, curr) => {\n        const pathParam = replacer ? replacer(camelCase(curr)) : camelCase(curr)\n        const replacement = `\\${${pathParam}}`\n\n        return prev.replace(curr, replacement)\n      }, this.path)\n    }\n\n    return `\\`${newPath}\\``\n  }\n\n  getParams(replacer?: (pathParam: string) => string): Record<string, string> | undefined {\n    const regex = /{(\\w|-)*}/g\n    const found = this.path.match(regex)\n\n    if (!found) {\n      return undefined\n    }\n\n    const params: Record<string, string> = {}\n    found.forEach((item) => {\n      item = item.replaceAll('{', '').replaceAll('}', '')\n\n      const pathParam = replacer ? replacer(camelCase(item)) : camelCase(item)\n\n      params[pathParam] = pathParam\n    }, this.path)\n\n    return params\n  }\n\n  /**\n   * Convert Swagger path to URLPath(syntax of Express)\n   * @example /pet/{petId} => /pet/:petId\n   */\n  toURLPath(): string {\n    return this.path.replaceAll('{', ':').replaceAll('}', '')\n  }\n}\n","type ParserModuleTs = typeof import('@kubb/parser-ts')\n\nexport type ParserModule = ParserModuleTs\n\nexport async function getParser(language: string | undefined) {\n  let modulePromise: Promise<ParserModule>\n\n  switch (language) {\n    default:\n      modulePromise = import('@kubb/parser-ts')\n      break\n  }\n\n  const module = await modulePromise\n\n  return module\n}\n"],"mappings":"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","names":["item","_a"]}